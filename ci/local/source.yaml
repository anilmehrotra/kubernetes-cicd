apiVersion: sources.eventing.knative.dev/v1alpha1
kind: GitHubSource
metadata:
  name: demo-ghsource
  namespace: default
spec:
  # serviceAccountName: backend-pipeline-ci-account
  eventTypes:
    - pull_request
    - push
  ownerAndRepository: castlemilk/kubernetes-cicd
  accessToken:
    secretKeyRef:
      name: githubsecret
      key: accessToken
  secretToken:
    secretKeyRef:
      name: githubsecret
      key: secretToken
  sink:
    apiVersion: serving.knative.dev/v1alpha1
    kind: Service
    name: github-event-display
---
apiVersion: serving.knative.dev/v1alpha1
kind: Service
metadata:
  name: github-event-display
spec:
  template:
    spec:
      containers:
      - image: gcr.io/knative-releases/github.com/knative/eventing-sources/cmd/event_display